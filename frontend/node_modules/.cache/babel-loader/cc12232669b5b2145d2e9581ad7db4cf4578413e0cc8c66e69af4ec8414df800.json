{"ast":null,"code":"var _jsxFileName = \"/Users/berfinaslan/yeni veri proje/tuketim-takip-sistemi/frontend/src/pages/yonetim/KesintiOlustur.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport api from \"../../services/api\";\n// EKSÄ°K Ä°KONLARI BURAYA EKLEDÄ°M:\nimport { CalendarPlus, AlertTriangle, CheckCircle } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KesintiOlustur = () => {\n  _s();\n  // Mahalle listesini tutacak state\n  const [neighborhoods, setNeighborhoods] = useState([]);\n\n  // All incidents state\n  const [incidents, setIncidents] = useState([]);\n\n  // Dedicated state for planned outages (for better tracking)\n  const [plannedOutages, setPlannedOutages] = useState([]);\n\n  // Loading state\n  const [loading, setLoading] = useState(true);\n\n  // Form verileri\n  const [newOutage, setNewOutage] = useState({\n    Mahalle: \"\",\n    Kaynak_Tipi: \"Elektrik\",\n    Aciklama: \"\",\n    Tarih: \"\",\n    Baslangic_Saat: \"\",\n    Bitis_Saat: \"\"\n  });\n\n  // Sayfa aÃ§Ä±lÄ±nca HEM Mahalleleri HEM DE PlanlÄ± Kesintileri Ã§ekelim\n  useEffect(() => {\n    fetchData();\n    fetchPlannedOutages();\n  }, []);\n\n  // Fetch all data (neighborhoods and all incidents)\n  const fetchData = async () => {\n    try {\n      // 1. Mahalleleri Ã§ek\n      const resStats = await api.get(\"/stats/dashboard\");\n      setNeighborhoods(resStats.data.data || []);\n\n      // 2. Mevcut TÃ¼m ArÄ±zalarÄ± Ã§ek (for reference)\n      const resIncidents = await api.get(\"/incidents\");\n      if (resIncidents.data.success && resIncidents.data.data) {\n        setIncidents(resIncidents.data.data);\n      }\n    } catch (error) {\n      console.error(\"âŒ Veri Ã§ekme hatasÄ±:\", error);\n    }\n  };\n\n  // Dedicated function to fetch and filter planned outages\n  const fetchPlannedOutages = async () => {\n    try {\n      var _resIncidents$data$da;\n      setLoading(true);\n      console.log(\"ğŸ“‹ PlanlÄ± kesintiler Ã§ekiliyor...\");\n\n      // Step 1: Fetch ONLY planned outages (Tip=PLANLI, Durum=Aktif) from backend\n      // Backend now supports query parameters: ?type=PLANLI&status=Aktif\n      // Note: Backend converts status=AKTIF to Durum='Aktif' (matches DB format)\n      const resIncidents = await api.get(\"/incidents?type=PLANLI&status=AKTIF\");\n\n      // Step 2: DEBUG - Log the full response\n      console.log(\"ğŸ” TÃœM VERÄ°LER (Full Response):\", resIncidents.data);\n      console.log(\"ğŸ” API Response Structure:\", {\n        success: resIncidents.data.success,\n        hasData: !!resIncidents.data.data,\n        dataLength: ((_resIncidents$data$da = resIncidents.data.data) === null || _resIncidents$data$da === void 0 ? void 0 : _resIncidents$data$da.length) || 0,\n        dataType: Array.isArray(resIncidents.data.data) ? 'Array' : typeof resIncidents.data.data\n      });\n      if (resIncidents.data.success && resIncidents.data.data) {\n        const allIncidents = resIncidents.data.data;\n        console.log(\"ğŸ“Š Toplam incident sayÄ±sÄ±:\", allIncidents.length);\n\n        // DEBUG: Log ALL incidents to see their structure\n        if (allIncidents.length > 0) {\n          console.log(\"ğŸ” TÃœM Ä°NCÄ°DENTLER (All Incidents):\", allIncidents);\n          console.log(\"ğŸ” Ä°lk 3 incident Ã¶rneÄŸi (TÃ¼rkÃ§e alanlar):\", allIncidents.slice(0, 3).map(inc => ({\n            _id: inc._id,\n            Mahalle: inc.Mahalle,\n            // Turkish field\n            Tip: inc.Tip,\n            // Turkish field (not Tur)\n            Durum: inc.Durum,\n            // Turkish field\n            Aciklama: inc.Aciklama,\n            // Turkish field\n            Baslangic_Tarihi: inc.Baslangic_Tarihi,\n            // Turkish field (not Baslangic_Zamani)\n            Bitis_Tarihi: inc.Bitis_Tarihi,\n            // Turkish field\n            allKeys: Object.keys(inc)\n          })));\n        }\n\n        // Step 3: STRICT FILTER - Backend now standardizes to UPPERCASE\n        // Filter for Tip='PLANLI' and Durum='AKTIF' (uppercase)\n        const filtered = allIncidents.filter(inc => {\n          // Use Turkish field names: Tip and Durum\n          const tipValue = String(inc.Tip || '').toUpperCase();\n          const durumValue = String(inc.Durum || '').toUpperCase();\n\n          // STRICT CHECK: Tip must be 'PLANLI' and Durum must be 'AKTIF' (UPPERCASE)\n          // Backend now standardizes all Durum values to uppercase\n          const isPlanned = tipValue === 'PLANLI';\n          const isActive = durumValue === 'AKTIF';\n          const matches = isPlanned && isActive;\n\n          // DEBUG: Log filtering decision\n          if (matches) {\n            console.log(\"âœ… PlanlÄ± kesinti doÄŸrulandÄ± (UPPERCASE standard):\", {\n              id: inc._id,\n              Mahalle: inc.Mahalle,\n              Tip: inc.Tip,\n              Durum: inc.Durum,\n              Baslangic_Tarihi: inc.Baslangic_Tarihi\n            });\n          } else {\n            console.log(\"âš ï¸ Filtrelendi (Tip veya Durum uyumsuz):\", {\n              id: inc._id,\n              Mahalle: inc.Mahalle,\n              Tip: inc.Tip,\n              Durum: inc.Durum,\n              isPlanned,\n              isActive\n            });\n          }\n          return matches;\n        });\n        console.log(`âœ… ${filtered.length} aktif planlÄ± kesinti bulundu (${allIncidents.length} toplam incident'ten)`);\n        console.log(\"âœ… FiltrelenmiÅŸ liste:\", filtered);\n        setPlannedOutages(filtered);\n        setIncidents(allIncidents); // Also update incidents state\n      } else {\n        console.warn(\"âš ï¸ API response format beklenmedik:\", resIncidents.data);\n        setPlannedOutages([]);\n      }\n    } catch (error) {\n      var _error$response;\n      console.error(\"âŒ PlanlÄ± kesintiler Ã§ekilirken hata:\", error);\n      console.error(\"âŒ Error details:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      setPlannedOutages([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCreateOutage = async e => {\n    e.preventDefault();\n    if (!newOutage.Mahalle) {\n      alert(\"LÃ¼tfen bir mahalle seÃ§iniz.\");\n      return;\n    }\n    try {\n      // Combine date and time for Baslangic_Tarihi (matches DB schema)\n      const dateTimeString = `${newOutage.Tarih}T${newOutage.Baslangic_Saat}:00`;\n      const baslangicTarihi = new Date(dateTimeString);\n\n      // Calculate duration from start and end time\n      const startTime = new Date(`${newOutage.Tarih}T${newOutage.Baslangic_Saat}:00`);\n      const endTime = new Date(`${newOutage.Tarih}T${newOutage.Bitis_Saat}:00`);\n      const tahminiSure = Math.round((endTime - startTime) / (1000 * 60 * 60)); // Convert to hours\n\n      // Calculate Bitis_Tarihi (end date)\n      const bitisTarihi = endTime;\n\n      // CRITICAL: Use EXACT Turkish field names matching database schema\n      // FORCE UPPERCASE for Durum to standardize database\n      const payload = {\n        Mahalle: newOutage.Mahalle,\n        // Turkish: Mahalle\n        Kaynak_Tipi: newOutage.Kaynak_Tipi,\n        // Turkish: Kaynak_Tipi\n        Tip: 'PLANLI',\n        // Turkish: Tip (uppercase)\n        Durum: 'AKTIF',\n        // CRITICAL: FORCE UPPERCASE to match backend standard\n        Baslangic_Tarihi: baslangicTarihi.toISOString(),\n        // Turkish: Baslangic_Tarihi\n        Bitis_Tarihi: bitisTarihi.toISOString(),\n        // Turkish: Bitis_Tarihi\n        Aciklama: newOutage.Aciklama,\n        // Turkish: Aciklama\n        Tahmini_Sure: tahminiSure > 0 ? tahminiSure : 1\n      };\n      console.log(\"ğŸ“¤ PlanlÄ± kesinti oluÅŸturuluyor (TÃ¼rkÃ§e alan adlarÄ± ile):\", payload);\n      const response = await api.post(\"/incidents/planned\", payload);\n      if (response.data.success) {\n        alert(\"âœ… PlanlÄ± kesinti baÅŸarÄ±yla oluÅŸturuldu ve bildirimler gÃ¶nderildi!\");\n\n        // Formu temizle\n        setNewOutage({\n          Mahalle: \"\",\n          Kaynak_Tipi: \"Elektrik\",\n          Aciklama: \"\",\n          Tarih: \"\",\n          Baslangic_Saat: \"\",\n          Bitis_Saat: \"\"\n        });\n\n        // CRITICAL: Refresh planned outages list immediately\n        console.log(\"ğŸ”„ Liste gÃ¼ncelleniyor...\");\n        await fetchPlannedOutages();\n        await fetchData(); // Also refresh all data\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"âŒ Kesinti oluÅŸturma hatasÄ±:\", error);\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Kesinti eklenemedi.\";\n      alert(\"âŒ Hata: \" + errorMsg);\n    }\n  };\n\n  // PlanlÄ± Kesintiyi TamamlandÄ± Olarak Ä°ÅŸaretle\n  const handleCompleteOutage = async id => {\n    if (!window.confirm(\"Bu planlÄ± kesintiyi tamamlandÄ± olarak iÅŸaretlemek istiyor musunuz?\")) return;\n\n    // Store the incident to restore on error\n    const incidentToRemove = plannedOutages.find(inc => inc._id === id);\n    try {\n      // Optimistic UI: Remove from planned outages list immediately\n      setPlannedOutages(prev => prev.filter(inc => inc._id !== id));\n      setIncidents(prev => prev.filter(inc => inc._id !== id));\n\n      // Call API to mark as resolved\n      await api.put(`/incidents/${id}/coz`);\n\n      // Refresh the list to ensure consistency\n      await fetchPlannedOutages();\n\n      // Show success message\n      alert(\"âœ… PlanlÄ± kesinti tamamlandÄ± olarak iÅŸaretlendi ve listeden kaldÄ±rÄ±ldÄ±.\");\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      // On error, restore the item and show error\n      if (incidentToRemove) {\n        setPlannedOutages(prev => [...prev, incidentToRemove]);\n        setIncidents(prev => [...prev, incidentToRemove]);\n      }\n      console.error(\"âŒ Kesinti tamamlama hatasÄ±:\", error);\n      const errorMsg = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Ä°ÅŸlem baÅŸarÄ±sÄ±z.\";\n      alert(\"âŒ Hata: \" + errorMsg);\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // ANA KAPSAYICI (TÃ¼m her ÅŸey bunun iÃ§inde olmalÄ±)\n    _jsxDEV(\"div\", {\n      className: \"w-full max-w-7xl mx-auto pt-[100px] px-4 pb-10 space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/60 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/60\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-emerald-900 mb-6 flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(CalendarPlus, {\n            className: \"text-emerald-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 11\n          }, this), \" Planl\\u0131 Kesinti Olu\\u015Ftur\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleCreateOutage,\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Mahalle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none bg-white\",\n              value: newOutage.Mahalle,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Mahalle: e.target.value\n              }),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Mahalle Se\\xE7iniz\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 21\n              }, this), neighborhoods.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.mahalle,\n                children: item.mahalle\n              }, item.mahalle, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 25\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Kaynak Tipi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none bg-white\",\n              value: newOutage.Kaynak_Tipi,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Kaynak_Tipi: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Elektrik\",\n                children: \"Elektrik\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Su\",\n                children: \"Su\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Dogalgaz\",\n                children: \"Do\\u011Falgaz\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Tarih\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\",\n              min: new Date().toISOString().split('T')[0],\n              value: newOutage.Tarih,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Tarih: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Ba\\u015Flang\\u0131\\xE7 Saati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\",\n              value: newOutage.Baslangic_Saat,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Baslangic_Saat: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"Biti\\u015F Saati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\",\n              value: newOutage.Bitis_Saat,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Bitis_Saat: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: \"A\\xE7\\u0131klama\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\xD6rn: Bak\\u0131m \\xE7al\\u0131\\u015Fmas\\u0131\",\n              className: \"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\",\n              value: newOutage.Aciklama,\n              onChange: e => setNewOutage({\n                ...newOutage,\n                Aciklama: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-end lg:col-span-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-xl transition shadow-md\",\n              children: \"Kesinti Ekle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/50 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/60\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(CalendarPlus, {\n            className: \"text-amber-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), \" Aktif Planl\\u0131 Kesintiler (\", plannedOutages.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 9\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-gray-500 py-10\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Planl\\u0131 kesintiler y\\xFCkleniyor...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this) : plannedOutages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-500 py-10 bg-white/40 rounded-xl border border-dashed border-gray-300\",\n          children: \"\\u015Eu an aktif planl\\u0131 kesinti yok.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this) : (() => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full text-left border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"text-gray-500 border-b border-gray-300\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Durum\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Mahalle\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Kaynak\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"A\\xE7\\u0131klama\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Ba\\u015Flang\\u0131\\xE7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Tahmini S\\xFCre\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"Biti\\u015F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-4 font-medium\",\n                    children: \"\\u0130\\u015Flem\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: plannedOutages.map(incident => {\n                  // Backend now standardizes Durum to UPPERCASE ('AKTIF' or 'PASIF')\n                  const isActive = String(incident.Durum || '').toUpperCase() === 'AKTIF';\n\n                  // Use Turkish field names: Baslangic_Tarihi and Bitis_Tarihi (matches DB schema)\n                  const startDate = incident.Baslangic_Tarihi ? new Date(incident.Baslangic_Tarihi) : incident.createdAt ? new Date(incident.createdAt) : null;\n                  const endDate = incident.Bitis_Tarihi ? new Date(incident.Bitis_Tarihi) : null;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"border-b border-gray-200/50 hover:bg-white/40 transition\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `px-3 py-1 rounded-full text-xs font-bold ${isActive ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-600'}`,\n                        children: isActive ? 'Aktif' : 'TamamlandÄ±'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 379,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 font-medium text-gray-800\",\n                      children: incident.Mahalle\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 383,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 font-medium text-gray-800\",\n                      children: incident.Kaynak_Tipi\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 text-sm text-gray-600\",\n                      children: incident.Aciklama || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 text-sm text-gray-500\",\n                      children: startDate ? startDate.toLocaleString(\"tr-TR\", {\n                        year: 'numeric',\n                        month: '2-digit',\n                        day: '2-digit',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      }) : '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 text-sm text-gray-500\",\n                      children: incident.Tahmini_Sure ? `${incident.Tahmini_Sure} saat` : '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 395,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4 text-sm text-gray-500\",\n                      children: endDate ? endDate.toLocaleString(\"tr-TR\", {\n                        year: 'numeric',\n                        month: '2-digit',\n                        day: '2-digit',\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      }) : '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 398,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleCompleteOutage(incident._id),\n                        className: \"flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition shadow-sm hover:shadow-md active:scale-95\",\n                        title: \"Planl\\u0131 kesintiyi tamamland\\u0131 olarak i\\u015Faretle\",\n                        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 413,\n                          columnNumber: 33\n                        }, this), \" Tamamland\\u0131\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 408,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 407,\n                      columnNumber: 25\n                    }, this)]\n                  }, incident._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this);\n        })()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(KesintiOlustur, \"zmX02tbazm5rQldiq8/hEXK4XkU=\");\n_c = KesintiOlustur;\nexport default KesintiOlustur;\nvar _c;\n$RefreshReg$(_c, \"KesintiOlustur\");","map":{"version":3,"names":["React","useState","useEffect","api","CalendarPlus","AlertTriangle","CheckCircle","jsxDEV","_jsxDEV","KesintiOlustur","_s","neighborhoods","setNeighborhoods","incidents","setIncidents","plannedOutages","setPlannedOutages","loading","setLoading","newOutage","setNewOutage","Mahalle","Kaynak_Tipi","Aciklama","Tarih","Baslangic_Saat","Bitis_Saat","fetchData","fetchPlannedOutages","resStats","get","data","resIncidents","success","error","console","_resIncidents$data$da","log","hasData","dataLength","length","dataType","Array","isArray","allIncidents","slice","map","inc","_id","Tip","Durum","Baslangic_Tarihi","Bitis_Tarihi","allKeys","Object","keys","filtered","filter","tipValue","String","toUpperCase","durumValue","isPlanned","isActive","matches","id","warn","_error$response","response","message","handleCreateOutage","e","preventDefault","alert","dateTimeString","baslangicTarihi","Date","startTime","endTime","tahminiSure","Math","round","bitisTarihi","payload","toISOString","Tahmini_Sure","post","_error$response2","_error$response2$data","errorMsg","handleCompleteOutage","window","confirm","incidentToRemove","find","prev","put","_error$response3","_error$response3$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","required","item","mahalle","type","min","split","placeholder","incident","startDate","createdAt","endDate","toLocaleString","year","month","day","hour","minute","onClick","title","size","_c","$RefreshReg$"],"sources":["/Users/berfinaslan/yeni veri proje/tuketim-takip-sistemi/frontend/src/pages/yonetim/KesintiOlustur.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport api from \"../../services/api\"; \n// EKSÄ°K Ä°KONLARI BURAYA EKLEDÄ°M:\nimport { CalendarPlus, AlertTriangle, CheckCircle } from \"lucide-react\";\n\nconst KesintiOlustur = () => {\n  // Mahalle listesini tutacak state\n  const [neighborhoods, setNeighborhoods] = useState([]);\n  \n  // All incidents state\n  const [incidents, setIncidents] = useState([]);\n  \n  // Dedicated state for planned outages (for better tracking)\n  const [plannedOutages, setPlannedOutages] = useState([]);\n  \n  // Loading state\n  const [loading, setLoading] = useState(true);\n\n  // Form verileri\n  const [newOutage, setNewOutage] = useState({\n    Mahalle: \"\",\n    Kaynak_Tipi: \"Elektrik\",\n    Aciklama: \"\",\n    Tarih: \"\",\n    Baslangic_Saat: \"\",\n    Bitis_Saat: \"\"\n  });\n\n  // Sayfa aÃ§Ä±lÄ±nca HEM Mahalleleri HEM DE PlanlÄ± Kesintileri Ã§ekelim\n  useEffect(() => {\n    fetchData();\n    fetchPlannedOutages();\n  }, []);\n\n  // Fetch all data (neighborhoods and all incidents)\n  const fetchData = async () => {\n    try {\n      // 1. Mahalleleri Ã§ek\n      const resStats = await api.get(\"/stats/dashboard\");\n      setNeighborhoods(resStats.data.data || []);\n\n      // 2. Mevcut TÃ¼m ArÄ±zalarÄ± Ã§ek (for reference)\n      const resIncidents = await api.get(\"/incidents\");\n      if (resIncidents.data.success && resIncidents.data.data) {\n        setIncidents(resIncidents.data.data);\n      }\n    } catch (error) {\n      console.error(\"âŒ Veri Ã§ekme hatasÄ±:\", error);\n    }\n  };\n\n  // Dedicated function to fetch and filter planned outages\n  const fetchPlannedOutages = async () => {\n    try {\n      setLoading(true);\n      console.log(\"ğŸ“‹ PlanlÄ± kesintiler Ã§ekiliyor...\");\n      \n      // Step 1: Fetch ONLY planned outages (Tip=PLANLI, Durum=Aktif) from backend\n      // Backend now supports query parameters: ?type=PLANLI&status=Aktif\n      // Note: Backend converts status=AKTIF to Durum='Aktif' (matches DB format)\n      const resIncidents = await api.get(\"/incidents?type=PLANLI&status=AKTIF\");\n      \n      // Step 2: DEBUG - Log the full response\n      console.log(\"ğŸ” TÃœM VERÄ°LER (Full Response):\", resIncidents.data);\n      console.log(\"ğŸ” API Response Structure:\", {\n        success: resIncidents.data.success,\n        hasData: !!resIncidents.data.data,\n        dataLength: resIncidents.data.data?.length || 0,\n        dataType: Array.isArray(resIncidents.data.data) ? 'Array' : typeof resIncidents.data.data\n      });\n      \n      if (resIncidents.data.success && resIncidents.data.data) {\n        const allIncidents = resIncidents.data.data;\n        console.log(\"ğŸ“Š Toplam incident sayÄ±sÄ±:\", allIncidents.length);\n        \n        // DEBUG: Log ALL incidents to see their structure\n        if (allIncidents.length > 0) {\n          console.log(\"ğŸ” TÃœM Ä°NCÄ°DENTLER (All Incidents):\", allIncidents);\n          console.log(\"ğŸ” Ä°lk 3 incident Ã¶rneÄŸi (TÃ¼rkÃ§e alanlar):\", allIncidents.slice(0, 3).map(inc => ({\n            _id: inc._id,\n            Mahalle: inc.Mahalle,                    // Turkish field\n            Tip: inc.Tip,                            // Turkish field (not Tur)\n            Durum: inc.Durum,                        // Turkish field\n            Aciklama: inc.Aciklama,                  // Turkish field\n            Baslangic_Tarihi: inc.Baslangic_Tarihi,  // Turkish field (not Baslangic_Zamani)\n            Bitis_Tarihi: inc.Bitis_Tarihi,          // Turkish field\n            allKeys: Object.keys(inc)\n          })));\n        }\n        \n        // Step 3: STRICT FILTER - Backend now standardizes to UPPERCASE\n        // Filter for Tip='PLANLI' and Durum='AKTIF' (uppercase)\n        const filtered = allIncidents.filter(inc => {\n          // Use Turkish field names: Tip and Durum\n          const tipValue = String(inc.Tip || '').toUpperCase();\n          const durumValue = String(inc.Durum || '').toUpperCase();\n          \n          // STRICT CHECK: Tip must be 'PLANLI' and Durum must be 'AKTIF' (UPPERCASE)\n          // Backend now standardizes all Durum values to uppercase\n          const isPlanned = tipValue === 'PLANLI';\n          const isActive = durumValue === 'AKTIF';\n          \n          const matches = isPlanned && isActive;\n          \n          // DEBUG: Log filtering decision\n          if (matches) {\n            console.log(\"âœ… PlanlÄ± kesinti doÄŸrulandÄ± (UPPERCASE standard):\", {\n              id: inc._id,\n              Mahalle: inc.Mahalle,\n              Tip: inc.Tip,\n              Durum: inc.Durum,\n              Baslangic_Tarihi: inc.Baslangic_Tarihi\n            });\n          } else {\n            console.log(\"âš ï¸ Filtrelendi (Tip veya Durum uyumsuz):\", {\n              id: inc._id,\n              Mahalle: inc.Mahalle,\n              Tip: inc.Tip,\n              Durum: inc.Durum,\n              isPlanned,\n              isActive\n            });\n          }\n          \n          return matches;\n        });\n        \n        console.log(`âœ… ${filtered.length} aktif planlÄ± kesinti bulundu (${allIncidents.length} toplam incident'ten)`);\n        console.log(\"âœ… FiltrelenmiÅŸ liste:\", filtered);\n        \n        setPlannedOutages(filtered);\n        setIncidents(allIncidents); // Also update incidents state\n      } else {\n        console.warn(\"âš ï¸ API response format beklenmedik:\", resIncidents.data);\n        setPlannedOutages([]);\n      }\n    } catch (error) {\n      console.error(\"âŒ PlanlÄ± kesintiler Ã§ekilirken hata:\", error);\n      console.error(\"âŒ Error details:\", error.response?.data || error.message);\n      setPlannedOutages([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateOutage = async (e) => {\n    e.preventDefault();\n    if (!newOutage.Mahalle) {\n        alert(\"LÃ¼tfen bir mahalle seÃ§iniz.\");\n        return;\n    }\n    \n    try {\n      // Combine date and time for Baslangic_Tarihi (matches DB schema)\n      const dateTimeString = `${newOutage.Tarih}T${newOutage.Baslangic_Saat}:00`;\n      const baslangicTarihi = new Date(dateTimeString);\n      \n      // Calculate duration from start and end time\n      const startTime = new Date(`${newOutage.Tarih}T${newOutage.Baslangic_Saat}:00`);\n      const endTime = new Date(`${newOutage.Tarih}T${newOutage.Bitis_Saat}:00`);\n      const tahminiSure = Math.round((endTime - startTime) / (1000 * 60 * 60)); // Convert to hours\n      \n      // Calculate Bitis_Tarihi (end date)\n      const bitisTarihi = endTime;\n      \n      // CRITICAL: Use EXACT Turkish field names matching database schema\n      // FORCE UPPERCASE for Durum to standardize database\n      const payload = {\n        Mahalle: newOutage.Mahalle,              // Turkish: Mahalle\n        Kaynak_Tipi: newOutage.Kaynak_Tipi,      // Turkish: Kaynak_Tipi\n        Tip: 'PLANLI',                           // Turkish: Tip (uppercase)\n        Durum: 'AKTIF',                          // CRITICAL: FORCE UPPERCASE to match backend standard\n        Baslangic_Tarihi: baslangicTarihi.toISOString(), // Turkish: Baslangic_Tarihi\n        Bitis_Tarihi: bitisTarihi.toISOString(), // Turkish: Bitis_Tarihi\n        Aciklama: newOutage.Aciklama,            // Turkish: Aciklama\n        Tahmini_Sure: tahminiSure > 0 ? tahminiSure : 1\n      };\n      \n      console.log(\"ğŸ“¤ PlanlÄ± kesinti oluÅŸturuluyor (TÃ¼rkÃ§e alan adlarÄ± ile):\", payload);\n      \n      const response = await api.post(\"/incidents/planned\", payload);\n      \n      if (response.data.success) {\n        alert(\"âœ… PlanlÄ± kesinti baÅŸarÄ±yla oluÅŸturuldu ve bildirimler gÃ¶nderildi!\");\n        \n        // Formu temizle\n        setNewOutage({ \n          Mahalle: \"\", \n          Kaynak_Tipi: \"Elektrik\", \n          Aciklama: \"\", \n          Tarih: \"\", \n          Baslangic_Saat: \"\", \n          Bitis_Saat: \"\" \n        });\n        \n        // CRITICAL: Refresh planned outages list immediately\n        console.log(\"ğŸ”„ Liste gÃ¼ncelleniyor...\");\n        await fetchPlannedOutages();\n        await fetchData(); // Also refresh all data\n      }\n    } catch (error) {\n      console.error(\"âŒ Kesinti oluÅŸturma hatasÄ±:\", error);\n      const errorMsg = error.response?.data?.message || \"Kesinti eklenemedi.\";\n      alert(\"âŒ Hata: \" + errorMsg);\n    }\n  };\n\n  // PlanlÄ± Kesintiyi TamamlandÄ± Olarak Ä°ÅŸaretle\n  const handleCompleteOutage = async (id) => {\n    if(!window.confirm(\"Bu planlÄ± kesintiyi tamamlandÄ± olarak iÅŸaretlemek istiyor musunuz?\")) return;\n\n    // Store the incident to restore on error\n    const incidentToRemove = plannedOutages.find(inc => inc._id === id);\n    \n    try {\n      // Optimistic UI: Remove from planned outages list immediately\n      setPlannedOutages(prev => prev.filter(inc => inc._id !== id));\n      setIncidents(prev => prev.filter(inc => inc._id !== id));\n\n      // Call API to mark as resolved\n      await api.put(`/incidents/${id}/coz`);\n      \n      // Refresh the list to ensure consistency\n      await fetchPlannedOutages();\n      \n      // Show success message\n      alert(\"âœ… PlanlÄ± kesinti tamamlandÄ± olarak iÅŸaretlendi ve listeden kaldÄ±rÄ±ldÄ±.\");\n    } catch (error) {\n      // On error, restore the item and show error\n      if (incidentToRemove) {\n        setPlannedOutages(prev => [...prev, incidentToRemove]);\n        setIncidents(prev => [...prev, incidentToRemove]);\n      }\n      console.error(\"âŒ Kesinti tamamlama hatasÄ±:\", error);\n      const errorMsg = error.response?.data?.message || \"Ä°ÅŸlem baÅŸarÄ±sÄ±z.\";\n      alert(\"âŒ Hata: \" + errorMsg);\n    }\n  };\n\n  return (\n    // ANA KAPSAYICI (TÃ¼m her ÅŸey bunun iÃ§inde olmalÄ±)\n    <div className=\"w-full max-w-7xl mx-auto pt-[100px] px-4 pb-10 space-y-8\">\n      \n      {/* --- BÃ–LÃœM 1: FORM --- */}\n      <div className=\"bg-white/60 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/60\">\n        <h2 className=\"text-2xl font-bold text-emerald-900 mb-6 flex items-center gap-3\">\n          <CalendarPlus className=\"text-emerald-600\" /> PlanlÄ± Kesinti OluÅŸtur\n        </h2>\n        \n        <form onSubmit={handleCreateOutage} className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Mahalle</label>\n                <select \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none bg-white\"\n                  value={newOutage.Mahalle}\n                  onChange={e => setNewOutage({...newOutage, Mahalle: e.target.value})}\n                  required\n                >\n                    <option value=\"\">Mahalle SeÃ§iniz</option>\n                    {neighborhoods.map((item) => (\n                        <option key={item.mahalle} value={item.mahalle}>{item.mahalle}</option>\n                    ))}\n                </select>\n            </div>\n            \n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Kaynak Tipi</label>\n                <select \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none bg-white\"\n                  value={newOutage.Kaynak_Tipi}\n                  onChange={e => setNewOutage({...newOutage, Kaynak_Tipi: e.target.value})}\n                >\n                    <option value=\"Elektrik\">Elektrik</option>\n                    <option value=\"Su\">Su</option>\n                    <option value=\"Dogalgaz\">DoÄŸalgaz</option>\n                </select>\n            </div>\n\n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Tarih</label>\n                <input \n                  type=\"date\" \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\"\n                  min={new Date().toISOString().split('T')[0]}\n                  value={newOutage.Tarih}\n                  onChange={e => setNewOutage({...newOutage, Tarih: e.target.value})}\n                  required\n                />\n            </div>\n\n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">BaÅŸlangÄ±Ã§ Saati</label>\n                <input \n                  type=\"time\" \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\"\n                  value={newOutage.Baslangic_Saat}\n                  onChange={e => setNewOutage({...newOutage, Baslangic_Saat: e.target.value})}\n                  required\n                />\n            </div>\n\n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">BitiÅŸ Saati</label>\n                <input \n                  type=\"time\" \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\"\n                  value={newOutage.Bitis_Saat}\n                  onChange={e => setNewOutage({...newOutage, Bitis_Saat: e.target.value})}\n                  required\n                />\n            </div>\n\n            <div className=\"flex flex-col gap-2\">\n                <label className=\"text-sm font-medium text-gray-700\">AÃ§Ä±klama</label>\n                <input \n                  type=\"text\" \n                  placeholder=\"Ã–rn: BakÄ±m Ã§alÄ±ÅŸmasÄ±\" \n                  className=\"p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 outline-none\"\n                  value={newOutage.Aciklama}\n                  onChange={e => setNewOutage({...newOutage, Aciklama: e.target.value})}\n                  required\n                />\n            </div>\n            \n            <div className=\"flex items-end lg:col-span-3\">\n                <button type=\"submit\" className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-xl transition shadow-md\">\n                    Kesinti Ekle\n                </button>\n            </div>\n        </form>\n      </div>\n\n      {/* --- BÃ–LÃœM 2: TABLO (AKTÄ°F PLANLI KESÄ°NTÄ°LER) --- */}\n      <div className=\"bg-white/50 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/60\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\n            <CalendarPlus className=\"text-amber-500\" /> Aktif PlanlÄ± Kesintiler ({plannedOutages.length})\n        </h2>\n        \n        {loading ? (\n          <div className=\"text-center text-gray-500 py-10\">\n            <p>PlanlÄ± kesintiler yÃ¼kleniyor...</p>\n          </div>\n        ) : plannedOutages.length === 0 ? (\n          <p className=\"text-center text-gray-500 py-10 bg-white/40 rounded-xl border border-dashed border-gray-300\">\n            Åu an aktif planlÄ± kesinti yok.\n          </p>\n        ) : (\n          (() => {\n\n          return (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-left border-collapse\">\n                <thead>\n                  <tr className=\"text-gray-500 border-b border-gray-300\">\n                      <th className=\"p-4 font-medium\">Durum</th>\n                      <th className=\"p-4 font-medium\">Mahalle</th>\n                      <th className=\"p-4 font-medium\">Kaynak</th>\n                      <th className=\"p-4 font-medium\">AÃ§Ä±klama</th>\n                      <th className=\"p-4 font-medium\">BaÅŸlangÄ±Ã§</th>\n                      <th className=\"p-4 font-medium\">Tahmini SÃ¼re</th>\n                      <th className=\"p-4 font-medium\">BitiÅŸ</th>\n                      <th className=\"p-4 font-medium\">Ä°ÅŸlem</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {plannedOutages.map((incident) => {\n                    // Backend now standardizes Durum to UPPERCASE ('AKTIF' or 'PASIF')\n                    const isActive = String(incident.Durum || '').toUpperCase() === 'AKTIF';\n                    \n                    // Use Turkish field names: Baslangic_Tarihi and Bitis_Tarihi (matches DB schema)\n                    const startDate = incident.Baslangic_Tarihi \n                      ? new Date(incident.Baslangic_Tarihi) \n                      : (incident.createdAt ? new Date(incident.createdAt) : null);\n                    const endDate = incident.Bitis_Tarihi ? new Date(incident.Bitis_Tarihi) : null;\n                    \n                    return (\n                      <tr key={incident._id} className=\"border-b border-gray-200/50 hover:bg-white/40 transition\">\n                        <td className=\"p-4\">\n                            <span className={`px-3 py-1 rounded-full text-xs font-bold ${isActive ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-600'}`}>\n                                {isActive ? 'Aktif' : 'TamamlandÄ±'}\n                            </span>\n                        </td>\n                        <td className=\"p-4 font-medium text-gray-800\">{incident.Mahalle}</td>\n                        <td className=\"p-4 font-medium text-gray-800\">{incident.Kaynak_Tipi}</td>\n                        <td className=\"p-4 text-sm text-gray-600\">{incident.Aciklama || '-'}</td>\n                        <td className=\"p-4 text-sm text-gray-500\">\n                          {startDate ? startDate.toLocaleString(\"tr-TR\", {\n                            year: 'numeric',\n                            month: '2-digit',\n                            day: '2-digit',\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          }) : '-'}\n                        </td>\n                        <td className=\"p-4 text-sm text-gray-500\">\n                          {incident.Tahmini_Sure ? `${incident.Tahmini_Sure} saat` : '-'}\n                        </td>\n                        <td className=\"p-4 text-sm text-gray-500\">\n                          {endDate ? endDate.toLocaleString(\"tr-TR\", {\n                            year: 'numeric',\n                            month: '2-digit',\n                            day: '2-digit',\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          }) : '-'}\n                        </td>\n                        <td className=\"p-4\">\n                            <button \n                              onClick={() => handleCompleteOutage(incident._id)} \n                              className=\"flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition shadow-sm hover:shadow-md active:scale-95\"\n                              title=\"PlanlÄ± kesintiyi tamamlandÄ± olarak iÅŸaretle\"\n                            >\n                                <CheckCircle size={16} /> TamamlandÄ±\n                            </button>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          );\n          })()\n        )}\n      </div>\n\n    </div> \n  );\n};\n\nexport default KesintiOlustur;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}