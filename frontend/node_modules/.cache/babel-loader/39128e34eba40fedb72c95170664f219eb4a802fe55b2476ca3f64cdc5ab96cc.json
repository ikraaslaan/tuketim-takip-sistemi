{"ast":null,"code":"import axios from 'axios';\n\n// GÜNCELLENEN KISIM: localhost yerine 127.0.0.1 kullanıyoruz.\n// Mac cihazlarda localhost bazen algılanmaz, bu yüzden IP adresi daha garantidir.\nconst API_URL = 'http://127.0.0.1:5001/api';\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 60000 // 60 seconds default for general operations\n});\n\n// Request interceptor - Token ekleme ve URL kontrolü (SENİN KODUN AYNEN KALDI)\napi.interceptors.request.use(config => {\n  // Ensure baseURL is set correctly\n  if (!config.baseURL) {\n    config.baseURL = API_URL;\n  }\n\n  // Ensure URL is properly constructed\n  if (config.url) {\n    // Remove leading slash from url if baseURL already ends with one\n    if (config.url.startsWith('/') && config.baseURL.endsWith('/')) {\n      config.url = config.url.substring(1);\n    }\n    // Add leading slash if missing\n    if (!config.url.startsWith('/') && !config.baseURL.endsWith('/')) {\n      config.url = '/' + config.url;\n    }\n  }\n\n  // Add auth token if available\n  try {\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n      const user = JSON.parse(userStr);\n      if (user && user.token) {\n        config.headers.Authorization = `Bearer ${user.token}`;\n      }\n    }\n  } catch (error) {\n    // Silently fail if localStorage parsing fails\n    console.warn('Failed to parse user from localStorage:', error);\n  }\n\n  // Debug logging (only in development)\n  if (process.env.NODE_ENV === 'development') {\n    var _config$method;\n    console.log('API Request:', {\n      method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n      url: config.url,\n      baseURL: config.baseURL,\n      fullURL: `${config.baseURL}${config.url}`\n    });\n  }\n  return config;\n}, error => {\n  console.error('Request interceptor error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor for error handling (SENİN KODUN AYNEN KALDI)\napi.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$config, _error$config2, _error$response, _error$response2, _error$response3;\n  console.error('API Error:', {\n    message: error.message,\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    baseURL: (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.baseURL,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    statusText: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.statusText,\n    data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data\n  });\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","headers","timeout","interceptors","request","use","config","url","startsWith","endsWith","substring","userStr","localStorage","getItem","user","JSON","parse","token","Authorization","error","console","warn","process","env","NODE_ENV","_config$method","log","method","toUpperCase","fullURL","Promise","reject","response","_error$config","_error$config2","_error$response","_error$response2","_error$response3","message","status","statusText","data"],"sources":["/Users/berfinaslan/yeni veri proje/tuketim-takip-sistemi/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// GÜNCELLENEN KISIM: localhost yerine 127.0.0.1 kullanıyoruz.\n// Mac cihazlarda localhost bazen algılanmaz, bu yüzden IP adresi daha garantidir.\nconst API_URL = 'http://127.0.0.1:5001/api';\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 60000, // 60 seconds default for general operations\n});\n\n// Request interceptor - Token ekleme ve URL kontrolü (SENİN KODUN AYNEN KALDI)\napi.interceptors.request.use(\n  (config) => {\n    // Ensure baseURL is set correctly\n    if (!config.baseURL) {\n      config.baseURL = API_URL;\n    }\n\n    // Ensure URL is properly constructed\n    if (config.url) {\n      // Remove leading slash from url if baseURL already ends with one\n      if (config.url.startsWith('/') && config.baseURL.endsWith('/')) {\n        config.url = config.url.substring(1);\n      }\n      // Add leading slash if missing\n      if (!config.url.startsWith('/') && !config.baseURL.endsWith('/')) {\n        config.url = '/' + config.url;\n      }\n    }\n\n    // Add auth token if available\n    try {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const user = JSON.parse(userStr);\n        if (user && user.token) {\n          config.headers.Authorization = `Bearer ${user.token}`;\n        }\n      }\n    } catch (error) {\n      // Silently fail if localStorage parsing fails\n      console.warn('Failed to parse user from localStorage:', error);\n    }\n\n    // Debug logging (only in development)\n    if (process.env.NODE_ENV === 'development') {\n      console.log('API Request:', {\n        method: config.method?.toUpperCase(),\n        url: config.url,\n        baseURL: config.baseURL,\n        fullURL: `${config.baseURL}${config.url}`\n      });\n    }\n\n    return config;\n  },\n  (error) => {\n    console.error('Request interceptor error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling (SENİN KODUN AYNEN KALDI)\napi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    console.error('API Error:', {\n      message: error.message,\n      url: error.config?.url,\n      baseURL: error.config?.baseURL,\n      status: error.response?.status,\n      statusText: error.response?.statusText,\n      data: error.response?.data\n    });\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}